/* * ATM Example system - file Log.java * * copyright (c) 2001 - Russell C. Bjork * */ package edu.gordon.simulation;import com.google.common.eventbus.EventBus;import com.google.common.eventbus.Subscribe;import edu.gordon.atm.events.CashDispensedEvent;import edu.gordon.atm.events.EnvelopeAcceptedEvent;import edu.gordon.atm.events.MessageSendingEvent;import edu.gordon.atm.events.MessageSentEvent;import edu.gordon.atm.events.PrintLogEvent;import edu.gordon.atm.physical.ILog;import edu.gordon.banking.Message;import edu.gordon.banking.Money;import edu.gordon.banking.Status;/** Manager for the ATM's internal log.  In a real ATM, this would  *  manage a physical device; in this edu.gordon.simulation,  it uses classes  *  in package edu.gordon.simulation to simulate the device. */ public class SimLog implements ILog {    /** Constructor     * @param simulation      */    public SimLog(final EventBus eventBus)    {        this.eventBus = eventBus;                this.eventBus.register(this);    }        /** Log the sending of a message to the bank     *     *  @param message the message to be logged     */    @Subscribe    public void logSend(MessageSendingEvent event)    {    	eventBus.post(new PrintLogEvent("Message:   " + event.getMessage()));    }        /** Log a response received from a message     *     *  @param status the status object returned by the bank in response     */    @Subscribe    public void logResponse(MessageSentEvent event)    {    	eventBus.post(new PrintLogEvent("Response:  " + event.getResult().toString()));    }        /** Log the dispensing of cash by the cash dispenser     *     *  @param amount the amount of cash being dispensed     */    @Subscribe    public void logCashDispensed(CashDispensedEvent event)    {    	 eventBus.post(new PrintLogEvent("Dispensed: " + event.getAmount()));    }        /** Log accepting an envelope.  This method is only called if an envelope     *  is actually received from the customer     */    @Subscribe    public void logEnvelopeAccepted(EnvelopeAcceptedEvent event)    {        eventBus.post(new PrintLogEvent("Envelope:  received"));    }    private final EventBus eventBus;}